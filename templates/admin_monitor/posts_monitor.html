{% extends "dashboard/base_admin.html" %}
{% block title %}Posts Monitor{% endblock %}

{% block content %}
<div class="page-content">
  <h1 class="page-title">Posts Monitor</h1>

  <div class="card table-wrap">
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Author</th>
          <th>Content</th>
          <th>Media</th>
          <th>Posted</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        {% for post in posts %}
        <tr>
          <td>{{ post.id }}</td>
          <td>{{ post.author.username }}</td>
          <td style="max-width:420px;word-break:break-word;">{{ post.text|truncatechars:140 }}</td>
          <td>
            {% if post.media %}
              <img src="{{ post.media.url }}" style="height:60px;border-radius:10px;">
            {% else %}
              â€”
            {% endif %}
          </td>
          <td>{{ post.created_at|date:"M d, Y H:i" }}</td>
          <td>
            <form method="post" action="{% url 'admin_delete_post' post.id %}">
              {% csrf_token %}
              <button type="submit" class="btn btn-danger btn-sm">Delete</button>
            </form>
          </td>
        </tr>
        {% empty %}
        <tr><td colspan="6" style="text-align:center;">No posts found.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}