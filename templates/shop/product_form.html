{% extends "base.html" %}
{% block title %}{{ action }} Product â€” BizConnect{% endblock %}
{% block content %}
<div class="page page-sm">
  <h1 class="mb-5">{{ action }} Product</h1>
  <div class="panel">
    <form method="post" enctype="multipart/form-data">
      {% csrf_token %}
      <div class="form-group">
        <label class="form-label">Product Name *</label>
        <input type="text" name="name" class="form-control"
               value="{% if product %}{{ product.name }}{% endif %}" required />
      </div>
      <div class="form-group">
        <label class="form-label">Description *</label>
        <textarea name="description" class="form-control" rows="4">{% if product %}{{ product.description }}{% endif %}</textarea>
      </div>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:var(--sp-4);">
        <div class="form-group">
          <label class="form-label">Price (&#8369;) *</label>
          <input type="number" name="price" class="form-control"
                 step="0.01" min="0.01"
                 value="{% if product %}{{ product.price }}{% endif %}" required />
        </div>
        <div class="form-group">
          <label class="form-label">Stock Quantity *</label>
          <input type="number" name="stock" class="form-control"
                 min="0" step="1"
                 value="{% if product %}{{ product.stock }}{% else %}10{% endif %}"
                 required />
          <p class="form-hint">How many units available. Stock reduces when order is delivered.</p>
        </div>
      </div>
      <div class="form-group">
        <label class="form-label">Product Image</label>
        <input type="file" name="image" class="form-control" accept="image/*" />
        {% if product and product.image %}
          <img src="{{ product.image.url }}"
               style="height:80px;border-radius:var(--r-sm);margin-top:8px;" />
          <p class="form-hint">Upload a new image to replace the current one.</p>
        {% endif %}
      </div>
      <div class="flex gap-3 mt-5">
        <button type="submit" class="btn btn-gold">Save Product</button>
        <a href="{% url 'seller_dashboard' %}" class="btn btn-ghost">Cancel</a>
      </div>
    </form>
  </div>
</div>
{% endblock %}