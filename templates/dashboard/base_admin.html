<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{% block title %}Admin â€” BizConnect{% endblock %}</title>
  {% load static %}
  <link rel="stylesheet" href="{% static 'theme.css' %}" />
  <style>
    .admin-layout { display: flex; min-height: 100vh; }
    .admin-sidebar {
      width: 240px; flex-shrink: 0;
      background: var(--charcoal);
      padding: var(--sp-5) 0;
      position: sticky; top: 0; height: 100vh;
      overflow-y: auto;
    }
    .admin-logo {
      font-family: var(--font-display); font-size: 1.2rem; font-weight: 700;
      color: var(--white); padding: 0 var(--sp-5) var(--sp-5);
      border-bottom: 1px solid rgba(255,255,255,0.08);
      margin-bottom: var(--sp-4);
    }
    .admin-logo span { color: var(--gold); }
    .admin-nav { list-style: none; }
    .admin-nav li a {
      display: flex; align-items: center; gap: var(--sp-3);
      padding: 11px var(--sp-5);
      color: var(--ash); font-size: 14px; font-weight: 500;
      transition: all var(--t); text-decoration: none;
    }
    .admin-nav li a:hover { background: rgba(255,255,255,0.06); color: var(--white); }
    .admin-nav li a.active { background: rgba(201,169,110,0.15); color: var(--gold); border-right: 3px solid var(--gold); }
    .admin-nav .nav-section { padding: var(--sp-4) var(--sp-5) var(--sp-2); font-size: 10px; font-weight: 700; letter-spacing: 1.5px; text-transform: uppercase; color: var(--smoke); }
    .admin-main { flex: 1; padding: var(--sp-6); background: var(--bg); overflow-x: hidden; }
    .admin-header { margin-bottom: var(--sp-6); }
    .admin-header h1 { font-size: 1.8rem; }
  </style>
  {% block extra_head %}{% endblock %}
</head>
<body>
<div class="admin-layout">
  <aside class="admin-sidebar">
    <div class="admin-logo">Biz<span>Connect</span><br/><span style="font-size:10px;color:var(--smoke);font-family:var(--font-body);font-weight:400;">Admin Panel</span></div>
    <ul class="admin-nav">
      <li class="nav-section">Overview</li>
      <li><a href="{% url 'admin_dashboard' %}" class="{% if request.resolver_match.url_name == 'admin_dashboard' %}active{% endif %}">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg>
        Dashboard
      </a></li>

      <li class="nav-section">Management</li>
      <li><a href="{% url 'admin_users' %}" class="{% if 'users' in request.path %}active{% endif %}">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
        Users
      </a></li>
      <li><a href="{% url 'admin_shop' %}" class="{% if 'shop' in request.path %}active{% endif %}">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/><line x1="3" y1="6" x2="21" y2="6"/><path d="M16 10a4 4 0 0 1-8 0"/></svg>
        Shop & Products
      </a></li>
      <li><a href="{% url 'admin_orders' %}" class="{% if 'orders' in request.path %}active{% endif %}">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 11l3 3L22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/></svg>
        Orders
      </a></li>
      <li><a href="{% url 'admin_community' %}" class="{% if 'community' in request.path %}active{% endif %}">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
        Community
      </a></li>
      <li><a href="{% url 'admin_reports' %}" class="{% if 'reports' in request.path %}active{% endif %}">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
        Reports
        {% if pending_reports_count > 0 %}
          <span class="badge badge-danger" style="margin-left:auto;">{{ pending_reports_count }}</span>
        {% endif %}
      </a></li>

      <li class="nav-section">Account</li>
      <li><a href="/">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
        Back to Site
      </a></li>
    </ul>
  </aside>

  <main class="admin-main">
    {% if messages %}
      {% for msg in messages %}
        <div class="alert {% if 'error' in msg.tags %}alert-error{% else %}alert-success{% endif %} mb-4">{{ msg }}</div>
      {% endfor %}
    {% endif %}
    {% block admin_content %}{% endblock %}
  </main>
</div>
{% block extra_scripts %}{% endblock %}
</body>
</html>